import{c as k,r as O,e as m,j as e,C as N,h as R,L as j,g as w,P as L,T as F,t as I}from"./index-D43GXPbl.js";import{G as S,P as G}from"./pen-BbDzjbBF.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],V=k("chevron-up",U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Y=k("lock-open",M);function B({ledgerData:h,user:p,isEditingProject:C,setIsEditingProject:b,editingProjectData:a,setEditingProjectData:o,handleSaveProject:$,handleDeleteProject:z,handleReorderProjects:T}){var v;const[u,g]=O.useState(!1);if(!h)return null;const c=(h.projects||[]).filter(s=>s.type==="private"?s.owner===(p==null?void 0:p.uid):!0),y=(s,t)=>{const l=t==="up"?s-1:s+1;if(l<0||l>=c.length)return;const n=c[s].id,d=c[l].id,r=[...h.projects||[]],x=r.findIndex(f=>f.id===n),i=r.findIndex(f=>f.id===d);x===-1||i===-1||([r[x],r[i]]=[r[i],r[x]],T(r))},W=()=>{if(a.rates){const s={};Object.keys(a.rates).forEach(t=>{s[t]=parseFloat(a.rates[t])||0}),a.rates=s}a.id==="daily"&&(a.type="public"),$()},_=async s=>{var t;if(g(!1),o(l=>({...l,defaultCurrency:s})),s!=="TWD"&&!((t=a.rates)==null?void 0:t[s])){const n=await I(s);n&&o(d=>({...d,rates:{...d.rates,[s]:n}}))}};if(C){const s=a.defaultCurrency||"TWD",t=m.find(l=>l.code===s);return e.jsxs("div",{className:"pb-24 pt-[calc(env(safe-area-inset-top)+2rem)] px-4 animate-in fade-in slide-in-from-bottom-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:a.id?"ç·¨è¼¯å°ˆæ¡ˆ":"æ–°å¢žå°ˆæ¡ˆ"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"å°ˆæ¡ˆåç¨±"}),e.jsx("input",{type:"text",value:a.name,onChange:l=>o({...a,name:l.target.value}),placeholder:"ä¾‹å¦‚ï¼š2024 æ—¥æœ¬è¡Œ",className:"w-full p-4 bg-gray-50 rounded-xl outline-none font-bold text-gray-800 focus:ring-2 focus:ring-gray-200 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"é è¨­å¹£åˆ¥"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!u),className:"w-full p-4 bg-white border border-gray-200 rounded-xl flex items-center justify-between shadow-sm active:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:(t==null?void 0:t.flag)||"ðŸŒ"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-bold text-gray-800",children:t==null?void 0:t.code}),e.jsx("span",{className:"text-xs text-gray-400",children:t==null?void 0:t.name})]})]}),e.jsx(N,{size:16,className:`text-gray-400 transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-100 z-20 max-h-60 overflow-y-auto p-2",children:m.map(l=>e.jsxs("button",{onClick:()=>_(l.code),className:`w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors ${s===l.code?"bg-rose-50":""}`,children:[e.jsx("span",{className:"text-xl w-8 text-center",children:l.flag}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:`font-bold text-sm ${s===l.code?"text-rose-600":"text-gray-700"}`,children:l.code}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:l.name})]}),s===l.code&&e.jsx(R,{size:16,className:"text-rose-500"})]},l.code))})]}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2 ml-1",children:"åœ¨æ­¤å°ˆæ¡ˆè¨˜å¸³æ™‚ï¼Œå°‡è‡ªå‹•é é¸æ­¤å¹£åˆ¥ã€‚"})]}),a.id!=="daily"&&e.jsxs("div",{onClick:()=>o({...a,type:a.type==="private"?"public":"private"}),className:`p-4 rounded-xl border flex items-center justify-between cursor-pointer transition-all ${a.type==="private"?"bg-slate-50 border-dashed border-2 border-slate-300 text-slate-600":"bg-white border-gray-200 text-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.type==="private"?"bg-white text-slate-400 shadow-sm":"bg-gray-100 text-gray-500"}`,children:a.type==="private"?e.jsx(j,{size:18}):e.jsx(Y,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm",children:"ç§äººå°ˆæ¡ˆ"}),e.jsx("span",{className:`text-[10px] ${a.type==="private"?"text-slate-400":"text-gray-400"}`,children:a.type==="private"?"åƒ…æ‚¨è‡ªå·±å¯è¦‹ (ä¸åƒèˆ‡åˆ†å¸³)":"æ‰€æœ‰æˆå“¡å¯è¦‹"})]})]}),e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${a.type==="private"?"bg-slate-400":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${a.type==="private"?"translate-x-6":""}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"åœ–ç¤º"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["project_daily","project_travel","project_house","heart"].map(l=>{const n=w(l);return e.jsx("button",{onClick:()=>o({...a,icon:l}),className:`p-4 rounded-xl flex justify-center transition-all ${a.icon===l?"bg-gray-900 text-white shadow-lg scale-105":"bg-gray-50 text-gray-400"}`,children:e.jsx(n,{size:24})},l)})})]}),(s!=="TWD"||a.rates&&Object.keys(a.rates).filter(l=>l!=="TWD").length>0)&&a.id!=="daily"&&e.jsxs("div",{className:"bg-blue-50 p-5 rounded-2xl border border-blue-100 animate-fade-in",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-500 mb-4 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(S,{size:14})," åŒ¯çŽ‡è¨­å®š (TWD)"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s!=="TWD"&&e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 shadow-sm",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 mb-1 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[t==null?void 0:t.flag," ",s," (é è¨­)"]}),e.jsx("span",{className:"text-blue-500 bg-blue-50 px-1.5 py-0.5 rounded text-[8px]",children:"ä¸»å¹£åˆ¥"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",value:((v=a.rates)==null?void 0:v[s])||"",onChange:l=>o({...a,rates:{...a.rates,[s]:l.target.value}}),className:"w-full bg-transparent font-bold text-gray-800 outline-none text-lg",placeholder:"?",step:"0.01"})})]}),Object.keys(a.rates||{}).filter(l=>l!=="TWD"&&l!==s).map(l=>{const n=m.find(d=>d.code===l);return e.jsxs("div",{className:"bg-white/50 p-3 rounded-xl border border-blue-100",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 mb-1 flex items-center gap-1",children:[(n==null?void 0:n.flag)||"ðŸŒ"," ",l]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",value:a.rates[l],onChange:d=>o({...a,rates:{...a.rates,[l]:d.target.value}}),className:"w-full bg-transparent font-bold text-gray-600 outline-none",placeholder:"?",step:"0.01"})})]},l)})]})]}),e.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[e.jsx("button",{onClick:W,className:"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg shadow-gray-200 active:scale-95 transition-transform",children:"å„²å­˜å°ˆæ¡ˆ"}),e.jsx("button",{onClick:()=>b(!1),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-xl font-bold active:scale-95 transition-transform",children:"å–æ¶ˆ"})]})]})]})}return e.jsxs("div",{className:"pb-24 pt-[calc(env(safe-area-inset-top)+2rem)] px-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"å°ˆæ¡ˆç®¡ç†"}),e.jsx("button",{onClick:()=>{o({id:"",name:"",icon:"project_daily",rates:{},type:"public",defaultCurrency:"TWD"}),b(!0)},className:"bg-gray-900 text-white p-2 rounded-xl shadow-lg shadow-gray-300 active:scale-90 transition-transform",children:e.jsx(L,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map((s,t)=>{var x;const l=w(s.icon),n=t===c.length-1,d=t===0,r=s.type==="private";return e.jsxs("div",{className:`
                                p-4 rounded-2xl flex items-center justify-between group transition-colors
                                ${r?"bg-slate-50 border-2 border-dashed border-slate-200":"bg-white border border-gray-100 shadow-sm"}
                            `,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`
                                    w-12 h-12 rounded-2xl flex items-center justify-center transition-colors
                                    ${r?"bg-white text-slate-400 shadow-sm":"bg-gray-50 text-gray-500 group-hover:bg-rose-50 group-hover:text-rose-500"}
                                `,children:e.jsx(l,{size:24})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:`font-bold flex items-center gap-2 ${r?"text-slate-500":"text-gray-600"} line-clamp-1`,children:[s.name,r&&e.jsx(j,{size:14,className:"text-slate-400 shrink-0"})]}),e.jsx("div",{className:"mt-1 flex gap-2",children:s.id==="daily"?e.jsx("span",{className:"bg-gray-100 text-gray-400 px-1.5 py-0.5 rounded-md text-[10px] font-bold",children:"é è¨­"}):s.defaultCurrency&&s.defaultCurrency!=="TWD"&&e.jsxs("span",{className:"bg-gray-50 text-gray-400 px-1.5 py-0.5 rounded-md text-[10px] font-bold flex items-center gap-1",children:[(x=m.find(i=>i.code===s.defaultCurrency))==null?void 0:x.flag," ",s.defaultCurrency]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex flex-col gap-1 mr-2 p-1 rounded-lg ${r?"bg-slate-200/50":"bg-gray-50"}`,children:[e.jsx("button",{onClick:()=>y(t,"up"),disabled:d,className:`p-1 rounded disabled:opacity-30 transition-all shadow-sm ${r?"hover:bg-white text-slate-400":"hover:bg-white text-gray-500 hover:text-gray-900"}`,children:e.jsx(V,{size:14})}),e.jsx("button",{onClick:()=>y(t,"down"),disabled:n,className:`p-1 rounded disabled:opacity-30 transition-all shadow-sm ${r?"hover:bg-white text-slate-400":"hover:bg-white text-gray-500 hover:text-gray-900"}`,children:e.jsx(N,{size:14})})]}),s.id!=="daily"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-[1px] h-8 mx-1 ${r?"bg-slate-200":"bg-gray-100"}`}),e.jsx("button",{onClick:()=>{o(s),b(!0)},className:`p-2 rounded-full transition-colors ${r?"text-slate-400 hover:text-slate-600 hover:bg-slate-200":"text-gray-300 hover:text-gray-600 hover:bg-gray-50"}`,children:e.jsx(G,{size:18})}),e.jsx("button",{onClick:()=>z(s.id),className:`p-2 rounded-full transition-colors ${r?"text-slate-300 hover:text-red-500 hover:bg-red-50":"text-red-200 hover:text-red-500 hover:bg-red-50"}`,children:e.jsx(F,{size:18})})]})]})]},s.id)})})]})}export{B as default};
